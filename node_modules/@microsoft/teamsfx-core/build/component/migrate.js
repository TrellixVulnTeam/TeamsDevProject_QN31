"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.convertEnvStateV2ToV3 = exports.convertEnvStateV3ToV2 = exports.EnvStateMigrationComponentNames = void 0;
const constants_1 = require("./constants");
exports.EnvStateMigrationComponentNames = [
    ["solution", "solution"],
    ["fx-resource-appstudio", constants_1.ComponentNames.AppManifest],
    ["fx-resource-identity", constants_1.ComponentNames.Identity],
    ["fx-resource-azure-sql", constants_1.ComponentNames.AzureSQL],
    ["fx-resource-aad-app-for-teams", constants_1.ComponentNames.AadApp],
    ["fx-resource-function", constants_1.ComponentNames.Function],
    ["fx-resource-apim", constants_1.ComponentNames.APIM],
    ["fx-resource-key-vault", constants_1.ComponentNames.KeyVault],
    ["fx-resource-bot", constants_1.ComponentNames.TeamsBot],
    ["fx-resource-frontend-hosting", constants_1.ComponentNames.TeamsTab],
];
/**
 * convert envState from V3 to V2
 */
function convertEnvStateV3ToV2(envStateV3) {
    const envStateV2 = {};
    const component2plugin = new Map();
    exports.EnvStateMigrationComponentNames.forEach((e) => {
        component2plugin.set(e[1], e[0]);
    });
    for (const componentName of Object.keys(envStateV3)) {
        const pluginName = component2plugin.get(componentName);
        if (pluginName) {
            envStateV2[pluginName] = envStateV3[componentName];
        }
    }
    return envStateV2;
}
exports.convertEnvStateV3ToV2 = convertEnvStateV3ToV2;
/**
 * convert envState from V2 to V3
 */
function convertEnvStateV2ToV3(envStateV2) {
    const envStateV3 = {};
    const plugin2component = new Map();
    exports.EnvStateMigrationComponentNames.forEach((e) => {
        plugin2component.set(e[0], e[1]);
    });
    for (const pluginName of Object.keys(envStateV2)) {
        const componentName = plugin2component.get(pluginName);
        if (componentName) {
            envStateV3[componentName] = envStateV2[pluginName];
        }
    }
    return envStateV3;
}
exports.convertEnvStateV2ToV3 = convertEnvStateV2ToV3;
//# sourceMappingURL=migrate.js.map